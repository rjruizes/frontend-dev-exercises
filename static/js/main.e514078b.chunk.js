(this["webpackJsonprti-exercise"]=this["webpackJsonprti-exercise"]||[]).push([[0],{102:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),i=(a(77),a(16)),o=a(113),s=a(114),u=a(111),m=a(115),f=a(116),d=a(108),b=a(109),h=a(117),p=a(110),v=a(38),O=a(39),g=a(48),j=a(47),y=a(61),k=a.n(y);function E(e,t){return"education_level"===t?(e[e.indexOf("Professional School")]=["Professional","School"],e[e.indexOf("Did not complete high school")]=["Did not","complete","high school"]):(e[e.indexOf("Asian-Pac-Islander")]=["Asian,","Pac. Islander"],e[e.indexOf("Amer-Indian-Eskimo")]=["Amer. Indian,","Eskimo"]),e}var x=function(e){Object(g.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).chartRef=r.a.createRef(),n}return Object(O.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.data,t=e.keys,a=e.vals;t=E(t,this.props.filterKey),this.myChart=new k.a(this.chartRef.current.getContext("2d"),{type:"horizontalBar",data:{labels:t,datasets:[{label:"Above $50k",data:a,backgroundColor:"rgba(31, 120, 180, 0.75)"},{label:"Below $50k",data:a.map((function(e){return Math.abs(100-e)})),backgroundColor:"rgba(165, 206, 227, 0.75)"}]},options:{tooltips:{enabled:!0,callbacks:{title:function(e,t){return e[0].label.split(",").join(" ").replace("  ","/")},label:function(e,t){return t.datasets[e.datasetIndex].label+": "+parseInt(e.value)+"%"}}},legend:{position:"bottom"},maintainAspectRatio:!1,scales:{xAxes:[{ticks:{max:100,callback:function(e){return(e/this.max*100).toFixed(0)+"%"}},stacked:!0}],yAxes:[{ticks:{beginAtZero:!0},stacked:!0}]}}})}},{key:"componentDidUpdate",value:function(e){var t=this.props.data,a=t.keys,n=t.vals;a=E(this.props.data.keys,this.props.filterKey),this.myChart.data.labels=a,this.myChart.data.datasets[0].data=n,this.myChart.data.datasets[1].data=n.map((function(e){return Math.abs(100-e)})),this.myChart.update()}},{key:"render",value:function(){return r.a.createElement("div",{className:"chart-container"},r.a.createElement("canvas",{ref:this.chartRef}))}}]),a}(r.a.Component),w=(a(80),a(81),function(e){Object(g.a)(a,e);var t=Object(j.a)(a);function a(e){var n;return Object(v.a)(this,a),(n=t.call(this,e)).ref=r.a.createRef(),n}return Object(O.a)(a,[{key:"render",value:function(){var e=this.ref.current?this.ref.current.scrollHeight:0;return r.a.createElement("div",{className:"collapsible-content full-width",ref:this.ref,style:{marginTop:10,maxHeight:this.props.filterOpen?e:0}},r.a.createElement("div",{className:"wrapper"},this.props.children))}}]),a}(r.a.Component)),C=function(e){return{min:parseInt(Object(d.a)(e,(function(e){return e.age}))),max:parseInt(Object(b.a)(e,(function(e){return e.age}))),marks:[20,30,40,50,60,70,80,90].reduce((function(e,t){return e[t]=t,e}),{})}};var A=function(){var e=Object(n.useState)(null),t=Object(i.a)(e,2),a=t[0],l=t[1],c=Object(n.useState)(null),d=Object(i.a)(c,2),b=d[0],v=d[1],O=Object(n.useState)("education_level"),g=Object(i.a)(O,2),j=g[0],y=g[1],k=Object(n.useState)(null),E=Object(i.a)(k,2),A=E[0],B=E[1],S=Object(n.useState)(null),I=Object(i.a)(S,2),R=I[0],M=I[1],N=Object(n.useState)(null),P=Object(i.a)(N,2),D=P[0],$=P[1],_=Object(n.useState)({min:17,max:90}),F=Object(i.a)(_,2),K=F[0],T=F[1],W=Object(n.useState)("Both"),z=Object(i.a)(W,2),G=z[0],H=z[1],J=Object(n.useState)(!1),L=Object(i.a)(J,2),U=L[0],V=L[1];return Object(n.useEffect)((function(){Object(f.a)("https://raw.githubusercontent.com/rjruizes/frontend-dev-exercises/master/census.csv").then((function(e){var t=C(e),a=t.min,n=t.max,r=t.marks;B(a),M(n),$(r),l(e)}))}),[]),Object(n.useEffect)((function(){if(a){var e=a;"Both"!==G&&(e=e.filter((function(e){return e.sex===G}))),e=(e=e.filter((function(e){return e.age>K.min}))).filter((function(e){return e.age<K.max}));var t=Object(h.a)(e,(function(e){var t=e.length;return 100*(e.filter((function(e){return"1"===e.over_50k})).length/t)}),(function(e){return e[j]})),n=Array.from(t).sort((function(e,t){return Object(p.a)(e[1],t[1])})),r=n.map((function(e){return e[0]})),l=n.map((function(e){return e[1]}));v({keys:r,vals:l})}}),[j,K,G,a]),r.a.createElement("div",{className:"wrapper"},r.a.createElement("h3",null,"Percentage of People Who Make Above and Below $50,000"),r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",paddingLeft:12,paddingRight:12}},r.a.createElement(o.a,{style:{visibility:"hidden"}},r.a.createElement(m.a,null)),r.a.createElement(s.a.Group,{options:[{label:"By Education",value:"education_level"},{label:"By Race",value:"race"}],onChange:function(e){return y(e.target.value)},value:j,optionType:"button"}),r.a.createElement(o.a,{onClick:function(){return V(!U)}},r.a.createElement(m.a,null))),r.a.createElement(w,{filterOpen:U},r.a.createElement("div",{className:"filterbox"},r.a.createElement("div",{className:"filterbox-item",style:{flexBasis:300}},r.a.createElement("b",null,"Age"),b?r.a.createElement(u.a,{range:!0,min:A,max:R,onAfterChange:function(e){return T({min:e[0],max:e[1]})},defaultValue:[A,R],marks:D}):r.a.createElement("div",null)),r.a.createElement("div",{className:"filterbox-item"},r.a.createElement("b",{style:{display:"block",marginBottom:5}},"Sex"),r.a.createElement(s.a.Group,{optionType:"button",value:G,options:[{label:"Both",value:"Both"},{label:"Male",value:"Male"},{label:"Female",value:"Female"}],onChange:function(e){return H(e.target.value)}})))),b?r.a.createElement(x,{data:b,filterKey:j}):r.a.createElement("div",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},72:function(e,t,a){e.exports=a(102)},77:function(e,t,a){},81:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.e514078b.chunk.js.map